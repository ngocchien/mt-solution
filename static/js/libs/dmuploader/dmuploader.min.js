/*
 * dmuploader.min.js - Jquery File Uploader - 0.1
 * http://www.daniel.com.uy/projects/jquery-file-uploader/
 *
 * Copyright (c) 2013 Daniel Morales
 * Dual licensed under the MIT and GPL licenses.
 * http://www.daniel.com.uy/doc/license/
 */
(function(c){function d(a,b){this.element=c(a);this.a=c.extend({},g,b);if(!this.w())return!1;this.B();return!0}var g={url:document.URL,method:"POST",g:{},m:0,o:0,i:"*",l:null,dataType:null,fileName:"file",R:function(){},s:function(){message},S:function(){},C:function(){},L:function(){},U:function(){},V:function(){},T:function(){},O:function(){},N:function(){},M:function(){},P:function(){}};d.prototype.w=function(){return void 0===window.FormData?(this.a.s.call(this.element,"Browser doesn't support Form API"),
    !1):0<this.element.find("input[type=file]").length?!0:this.j("drop",this.element)&&this.j("dragstart",this.element)?!0:(this.a.s.call(this.element,"Browser doesn't support Ajax Drag and Drop"),!1)};d.prototype.j=function(a,b){b=b||document.createElement("div");a="on"+a;var c=a in b;c||(b.setAttribute||(b=document.createElement("div")),b.setAttribute&&b.removeAttribute&&(b.setAttribute(a,""),c="function"==typeof b[a],"undefined"!=typeof b[a]&&(b[a]=void 0),b.removeAttribute(a)));return c};d.prototype.B=
    function(){var a=this;a.b=[];a.c=-1;a.h=!1;a.element.f("drop",function(b){b.preventDefault();a.v(b.W.dataTransfer.files)});a.element.find("input[type=file]").f("change",function(b){a.v(b.target.files);c(this).Z("")})};d.prototype.v=function(a){for(var b=this.b.length,h=0;h<a.length;h++){var f=a[h];if(!(0<this.a.m&&f.size>this.a.m||"*"!=this.a.i&&!f.type.match(this.a.i))){if(null!=this.a.l){var d=this.a.l.toLowerCase().split(";"),g=f.name.toLowerCase().split(".").pop();if(0>c.K(g,d))continue}0<this.a.o&&
this.b.length>=this.a.o||this.b.push(f)}}this.h||this.b.length==b||this.u()};d.prototype.u=function(){var a=this;a.c++;if(a.c>=a.b.length)a.c=a.b.length-1,a.h=!1;else{var b=a.b[a.c],d=new FormData;d.append(a.a.fileName,b);!1!==a.a.C.call(a.element,a.c)&&(b="function"==typeof a.a.g?a.a.g():a.a.g,c.A(b,function(a,b){d.append(a,b)}),a.h=!0,c.F({url:a.a.url,type:a.a.method,dataType:a.a.dataType,data:d,cache:!1,contentType:!1,X:!1,J:!1,D:function(){var a=c.G.D();a.upload&&a.upload.addEventListener("progress",
    function(){},!1);return a},Y:function(){},error:function(){},complete:function(){a.u()}}))}};c.I.H=function(a){return this.A(function(){c.data(this,"dmUploader")||c.data(this,"dmUploader",new d(this,a))})};c(document).f("dragenter",function(a){a.stopPropagation();a.preventDefault()});c(document).f("dragover",function(a){a.stopPropagation();a.preventDefault()});c(document).f("drop",function(a){a.stopPropagation();a.preventDefault()})})(jQuery);